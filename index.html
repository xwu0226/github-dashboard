<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Github Dashboard!</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <nav class="navbar navbar-toggleable-md navbar-light bg-faded">

                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand" href="#">Home</a>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table id="table-personal-repositories" class="table table-striped">
                <thead>
                <th>Repository</th>
                <th>Stars</th>
                <th>Forks</th>
                <th>Issues</th>
                <th>PRs</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table id="table-jupyter-repositories" class="table table-striped">
                <thead>
                <th>Repository</th>
                <th>Stars</th>
                <th>Forks</th>
                <th>Issues</th>
                <th>PRs</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table id="table-apache-repositories" class="table table-striped">
                <thead>
                <th>Repository</th>
                <th>Stars</th>
                <th>Forks</th>
                <th>Issues</th>
                <th>PRs</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table id="table-codait-repositories" class="table table-striped">
                <thead>
                <th>Repository</th>
                <th>Stars</th>
                <th>Forks</th>
                <th>Issues</th>
                <th>PRs</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table id="table-ibm-repositories" class="table table-striped">
                <thead>
                <th>Repository</th>
                <th>Stars</th>
                <th>Forks</th>
                <th>Issues</th>
                <th>PRs</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

</div>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/scripts.js"></script>

<script type="text/javascript">

    function loadRepositoryDataToTable(table, data) {
        data.forEach(function (element) {
            //console.log('processing repository ' + element.full_name)

            let tr_with_style = "<tr>"
            if(element.open_pulls_count > 0) {
                tr_with_style = "<tr class='table-success'>"
            }
            let link = "<a href='" + element.html_url + "' target='_blank'>" + element.full_name + "</a>"
            let row = tr_with_style
                + "<td>" + link + "</td>"
                + "<td>" + element.stargazers_count + "</td>"
                + "<td>" + element.forks_count + "</td>"
                + "<td>" + element.open_issues_count + "</td>"
                + "<td>" + element.open_pulls_count + "</td>"
                + "</tr>"

            table.append(row)

        });
    }

    // A $( document ).ready() block.
    $(document).ready(function () {
        loadOrganizationRepositories("users/lresende", "", function (data) {
            loadRepositoryDataToTable($('#table-personal-repositories tbody'), data)
        });

        loadOrganizationRepositories("orgs/jupyter-incubator", "(enterprise_gateway|nb2kg)", function (data) {
            loadRepositoryDataToTable($('#table-jupyter-repositories tbody'), data)
        });

        loadOrganizationRepositories("orgs/apache", "(.*toree.*|.*bahir.*|.*apache-website-template.*)", function (data) {
            loadRepositoryDataToTable($('#table-apache-repositories tbody'), data)
        });

        loadOrganizationRepositories("orgs/CODAIT", ".*", function (data) {
            loadRepositoryDataToTable($('#table-codait-repositories tbody'), data)
        });

        loadOrganizationRepositories("orgs/IBM", "^IBM\/MAX.*", function (data) {
            loadRepositoryDataToTable($('#table-ibm-repositories tbody'), data)
        });
    });


</script>

</body>
</html>